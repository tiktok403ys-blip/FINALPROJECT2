import { headers } from 'next/headers'

export default function Robots() {
  const headersList = headers()
  const host = headersList.get('host') || process.env.NEXT_PUBLIC_SITE_DOMAIN || 'localhost:3000'
  
  // Ensure we use https for production domains
  const protocol = host.includes('localhost') ? 'http' : 'https'
  
  // Check if this is admin subdomain
  const isAdminSubdomain = host.startsWith('admin.') || host.includes('admin.')
  
  // For admin subdomain, allow all access including /admin
  // For main site, disallow /admin to prevent indexing
  const rules = isAdminSubdomain 
    ? {
        userAgent: '*',
        allow: '/',
      }
    : {
        userAgent: '*',
        allow: '/',
        disallow: '/admin',
      }
  
  return {
    rules,
    sitemap: `${protocol}://${host}/sitemap.xml`,
  }
}


