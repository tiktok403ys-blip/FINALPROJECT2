import { headers } from 'next/headers'

export default function Robots() {
  const headersList = headers()
  const host = headersList.get('host') || process.env.NEXT_PUBLIC_SITE_DOMAIN || 'localhost:3000'
  
  // Ensure we use https for production domains
  const protocol = host.includes('localhost') ? 'http' : 'https'
  
  // Check if this is admin subdomain
  const isAdminSubdomain = host.startsWith('admin.') || host.includes('admin.')
  
  // For admin subdomain, disallow all access to prevent indexing
  // For main site, allow all but disallow /admin
  const rules = isAdminSubdomain 
    ? {
        userAgent: '*',
        disallow: '/',
      }
    : {
        userAgent: '*',
        allow: '/',
        disallow: '/admin',
      }
  
  return {
    rules,
    sitemap: `${protocol}://${host}/sitemap.xml`,
  }
}


